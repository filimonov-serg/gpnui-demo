{"version":3,"file":"TreeSelect-DTj0S-z_.js","sources":["../../src/Pages/TreeSelect.vue"],"sourcesContent":["<script setup lang=\"ts\">\n    import { type ControlSize, type IFlatTreeItem, type ISelectOption, GpnSelect, GpnTreeSelect } from \"gpn-ui\";\n    import { computed, ref } from \"vue\";\n    import { useGlobalStore } from \"../stores/store\";\n\n    const store = useGlobalStore();\n    const selItem = ref(null);\n    const selItemMul = ref<IFlatTreeItem[]>([\n        {\n            id: 121,\n            name: \"Node 2.1\",\n            parent_id: 12,\n            has_children: false,\n        },\n    ]);\n    const selItemSearch = ref(null);\n    const selItemMultiSearch = ref([]);\n    const selItemSearchLoading = ref(null);\n    const isLoading = ref(false);\n    const selItemValueOut = ref([]);\n    const treeSelAsync = ref(null);\n    const isNodeLoading = ref(false);\n\n    const localSearchText = ref(\"\");\n    const localSearchTextMulti = ref(\"\");\n    const localSearchTextLoading = ref(\"\");\n\n    const tree = ref<IFlatTreeItem[]>([\n        {\n            id: 0,\n            name: \"Root node\",\n            parent_id: null,\n            has_children: true,\n        },\n        {\n            id: 1,\n            name: \"Node 1 with long title text which must be truncated\",\n            parent_id: 0,\n            has_children: false,\n        },\n        {\n            id: 12,\n            name: \"Node 2\",\n            parent_id: 0,\n            has_children: true,\n        },\n        {\n            id: 121,\n            name: \"Node 2.1\",\n            parent_id: 12,\n            has_children: false,\n        },\n        {\n            id: 13,\n            name: \"Node 3\",\n            parent_id: 0,\n            has_children: false,\n        },\n        {\n            id: 2,\n            name: \"Root 2\",\n            parent_id: null,\n            has_children: true,\n        },\n        {\n            id: 3,\n            name: \"Root 3\",\n            parent_id: null,\n            has_children: true,\n        },\n    ]);\n\n    const asyncTree = ref<IFlatTreeItem[]>([\n        {\n            id: 0,\n            name: \"Root node async\",\n            parent_id: null,\n            has_children: true,\n        },\n        {\n            id: 2,\n            name: \"Root 2 async\",\n            parent_id: null,\n            has_children: true,\n        },\n        {\n            id: 3,\n            name: \"Root 3 async\",\n            parent_id: null,\n            has_children: true,\n        },\n    ]);\n\n    const sizes = ref<ISelectOption[]>([\n        { id: \"xl\", name: \"XL\" },\n        { id: \"l\", name: \"L\" },\n        { id: \"m\", name: \"M\" },\n        { id: \"s\", name: \"S\" },\n        { id: \"xs\", name: \"XS\" },\n    ]);\n\n    const selSize = ref<ISelectOption>({ id: \"m\", name: \"M\" });\n\n    const localSearchList = computed(() => {\n        if (localSearchText.value == \"\") return tree.value;\n        else {\n            const newTree: IFlatTreeItem[] = [];\n            const find = tree.value.filter((f) => f.name.toLocaleLowerCase().indexOf(localSearchText.value.toLocaleLowerCase()) >= 0);\n            find.forEach((i) => {\n                // newTree.push({ ...i, _is_expanded: true });\n                newTree.push(i);\n                let parent_node_id = i.parent_id;\n                while (parent_node_id !== null && parent_node_id !== undefined && newTree.findIndex((f) => f.id === parent_node_id) === -1) {\n                    const parent_node = tree.value.find((f) => f.id === parent_node_id);\n                    if (!parent_node) break;\n                    // newTree.push({ ...parent_node, _is_expanded: true });\n                    newTree.push(parent_node);\n                    parent_node_id = parent_node.parent_id;\n                }\n            });\n            return newTree;\n        }\n    });\n    const localSearchMultiList = computed(() => {\n        if (localSearchTextMulti.value == \"\") return tree.value;\n        else {\n            const newTree: IFlatTreeItem[] = [];\n            const find = tree.value.filter((f) => f.name.toLocaleLowerCase().indexOf(localSearchTextMulti.value.toLocaleLowerCase()) >= 0);\n            find.forEach((i) => {\n                newTree.push({ ...i, _is_expanded: true });\n                let parent_node_id = i.parent_id;\n                while (parent_node_id !== null && parent_node_id !== undefined && newTree.findIndex((f) => f.id === parent_node_id) === -1) {\n                    const parent_node = tree.value.find((f) => f.id === parent_node_id);\n                    if (!parent_node) break;\n                    newTree.push({ ...parent_node, _is_expanded: true });\n                    parent_node_id = parent_node.parent_id;\n                }\n            });\n            return newTree;\n        }\n    });\n    const localSearchListLoading = computed(() => {\n        if (localSearchTextLoading.value == \"\") return tree.value;\n        else {\n            const newTree: IFlatTreeItem[] = [];\n            const find = tree.value.filter((f) => f.name.toLocaleLowerCase().indexOf(localSearchTextLoading.value.toLocaleLowerCase()) >= 0);\n            find.forEach((i) => {\n                newTree.push({ ...i, _is_expanded: true });\n                let parent_node_id = i.parent_id;\n                while (parent_node_id !== null && parent_node_id !== undefined && newTree.findIndex((f) => f.id === parent_node_id) === -1) {\n                    const parent_node = tree.value.find((f) => f.id === parent_node_id);\n                    if (!parent_node) break;\n                    newTree.push({ ...parent_node, _is_expanded: true });\n                    parent_node_id = parent_node.parent_id;\n                }\n            });\n            return newTree;\n        }\n    });\n\n    function onLocalSearch(text: string) {\n        localSearchText.value = text;\n    }\n    function onLocalSearchMulti(text: string) {\n        localSearchTextMulti.value = text;\n    }\n    function onLocalSearchLoading(text: string) {\n        isLoading.value = true;\n        setTimeout(() => {\n            localSearchTextLoading.value = text;\n            isLoading.value = false;\n        }, 1000);\n    }\n    const timeoutFn = (ms: number) => {\n        return new Promise((resolve) => setTimeout(resolve, ms));\n    };\n    const onLoadNode = async (id: number) => {\n        console.log(\"start async\");\n        isNodeLoading.value = true;\n        await timeoutFn(2000);\n        isNodeLoading.value = false;\n        const fNode = asyncTree.value.find((f) => f.id === id);\n        if (fNode) {\n            asyncTree.value.push({\n                id: `${id}-${Math.random()}`,\n                name: `Random loaded node ${Math.random()}`,\n                parent_id: id,\n                has_children: false,\n            });\n        }\n    };\n\n    timeoutFn(1000).then(() => {\n        selItemMul.value.push({\n            id: 12,\n            name: \"Node 2\",\n            parent_id: 0,\n            has_children: true,\n        });\n    });\n</script>\n<template>\n    <h2>TreeSelect</h2>\n    <div class=\"grid\">\n        <h5>View - default</h5>\n        <div>XL</div>\n        <div>L</div>\n        <div>M</div>\n        <div>S</div>\n        <div>XS</div>\n\n        <h5>Single</h5>\n        <div><GpnTreeSelect v-model=\"selItem\" size=\"xl\" clearable :options=\"tree\" label=\"Select one item\" caption=\"caption text\" placeholder=\"Select one item...\" :theme=\"store.theme\" /></div>\n        <div><GpnTreeSelect v-model=\"selItem\" size=\"l\" clearable :options=\"tree\" label=\"Select one item\" caption=\"caption text\" placeholder=\"Select one item...\" :theme=\"store.theme\" /></div>\n        <div><GpnTreeSelect v-model=\"selItem\" size=\"m\" clearable :options=\"tree\" label=\"Select one item\" caption=\"caption text\" placeholder=\"Select one item...\" :theme=\"store.theme\" /></div>\n        <div><GpnTreeSelect v-model=\"selItem\" size=\"s\" clearable :options=\"tree\" disabled label=\"Select one item\" caption=\"caption text\" placeholder=\"Select one item...\" :theme=\"store.theme\" /></div>\n        <div><GpnTreeSelect v-model=\"selItem\" size=\"xs\" clearable :options=\"tree\" label=\"Select one item\" caption=\"caption text\" placeholder=\"Select one item...\" :theme=\"store.theme\" /></div>\n\n        <h5>Multiple</h5>\n        <GpnTreeSelect v-model=\"selItemMul\" size=\"xl\" multiple :options=\"tree\" label=\"Select many item\" caption=\"caption text\" placeholder=\"Select many item...\" :theme=\"store.theme\" />\n        <GpnTreeSelect v-model=\"selItemMul\" size=\"l\" multiple :options=\"tree\" label=\"Select many item\" caption=\"caption text\" placeholder=\"Select many item...\" :theme=\"store.theme\" />\n        <GpnTreeSelect v-model=\"selItemMul\" size=\"m\" multiple :options=\"tree\" label=\"Select many item\" caption=\"caption text\" placeholder=\"Select many item...\" :theme=\"store.theme\" />\n        <GpnTreeSelect v-model=\"selItemMul\" size=\"s\" multiple :options=\"tree\" label=\"Select many item\" caption=\"caption text\" placeholder=\"Select many item...\" :theme=\"store.theme\" />\n        <GpnTreeSelect v-model=\"selItemMul\" size=\"xs\" multiple :options=\"tree\" label=\"Select many item\" caption=\"caption text\" placeholder=\"Select many item...\" :theme=\"store.theme\" />\n\n        <h5>Single search</h5>\n        <GpnTreeSelect\n            v-model=\"selItemSearch\"\n            search\n            size=\"m\"\n            clearable\n            :options=\"localSearchList\"\n            label=\"Select one item\"\n            caption=\"caption text\"\n            placeholder=\"Select one item...\"\n            :theme=\"store.theme\"\n            @search=\"onLocalSearch\"\n        />\n        <GpnTreeSelect\n            v-model=\"selItemMultiSearch\"\n            search\n            multiple\n            size=\"m\"\n            clearable\n            :options=\"localSearchMultiList\"\n            label=\"Select many items\"\n            caption=\"caption text\"\n            placeholder=\"Select some items...\"\n            :theme=\"store.theme\"\n            @search=\"onLocalSearchMulti\"\n        />\n        <GpnTreeSelect\n            v-model=\"selItemSearchLoading\"\n            search\n            size=\"m\"\n            clearable\n            :options=\"localSearchListLoading\"\n            :max-height=\"100\"\n            label=\"Select one item\"\n            caption=\"loading state & max-height\"\n            placeholder=\"Select one item...\"\n            :loading=\"isLoading\"\n            :theme=\"store.theme\"\n            @search=\"onLocalSearchLoading\"\n        />\n        <GpnTreeSelect\n            v-model=\"selItemSearchLoading\"\n            search\n            form=\"clear-clear\"\n            size=\"m\"\n            clearable\n            :options=\"localSearchListLoading\"\n            :max-height=\"100\"\n            label=\"Select one item\"\n            caption=\"loading state & max-height\"\n            placeholder=\"Select one item...\"\n            :loading=\"isLoading\"\n            :theme=\"store.theme\"\n            @search=\"onLocalSearchLoading\"\n        />\n        <div></div>\n\n        <h5>Tree async</h5>\n        <GpnTreeSelect\n            v-model=\"treeSelAsync\"\n            @load-node=\"onLoadNode\"\n            :node-loading=\"isNodeLoading\"\n            is-async\n            size=\"l\"\n            clearable\n            :options=\"asyncTree\"\n            label=\"Select one item\"\n            caption=\"caption text\"\n            placeholder=\"Select one item...\"\n            :theme=\"store.theme\"\n        />\n    </div>\n    <h5>Value out</h5>\n    <div style=\"display: flex; gap: 20px; margin-bottom: 20px\">\n        <div style=\"width: 300px\">\n            <GpnTreeSelect\n                v-model=\"selItemValueOut\"\n                value-out\n                bold\n                multiple\n                :size=\"(String(selSize?.id) || 'm') as ControlSize\"\n                clearable\n                :options=\"localSearchMultiList\"\n                label=\"Select many items\"\n                caption=\"caption text\"\n                placeholder=\"Select some items...\"\n                :theme=\"store.theme\"\n            />\n        </div>\n        <div style=\"width: 90px\">\n            <GpnSelect v-model=\"selSize\" bold :options=\"sizes\" label=\"Select size\" :theme=\"store.theme\" />\n        </div>\n    </div>\n    <div style=\"width: 300px\">\n        <GpnTreeSelect\n            v-model=\"selItemValueOut\"\n            value-out\n            out-type=\"row\"\n            multiple\n            size=\"m\"\n            clearable\n            :options=\"localSearchMultiList\"\n            label=\"Select many items\"\n            caption=\"caption text\"\n            :theme=\"store.theme\"\n            placeholder=\"Select some items...\"\n        />\n    </div>\n</template>\n\n<style lang=\"scss\">\n    .grid {\n        display: grid;\n        grid-template-columns: 90px repeat(5, minmax(0, 1fr)) 10px;\n        grid-template-rows: repeat(6, 1fr);\n        grid-auto-flow: column;\n        gap: 16px;\n        align-items: center;\n        margin-bottom: 48px;\n    }\n    h5 {\n        color: #2f5e7b;\n        font-size: 12px;\n    }\n</style>\n"],"names":["store","useGlobalStore","selItem","ref","selItemMul","selItemSearch","selItemMultiSearch","selItemSearchLoading","isLoading","selItemValueOut","treeSelAsync","isNodeLoading","localSearchText","localSearchTextMulti","localSearchTextLoading","tree","asyncTree","sizes","selSize","localSearchList","computed","newTree","f","parent_node_id","parent_node","localSearchMultiList","localSearchListLoading","onLocalSearch","text","onLocalSearchMulti","onLocalSearchLoading","timeoutFn","ms","resolve","onLoadNode","id"],"mappings":"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"}