{"version":3,"file":"Period-Dfy4ft8k.js","sources":["../../../lib/components/GpnTextField/GpnTextField.vue","../../../lib/components/GpnPeriod/GpnPeriod.vue","../../src/Pages/Period.vue"],"sourcesContent":["<script setup lang=\"ts\">\n    import { ref, computed } from \"vue\";\n    import type { PropType } from \"vue\";\n    import { ns } from \"../../utils/ns\";\n    import type { TextfieldType, TextfieldSize, TexfieldInputType, TextfieldWidth, TextfieldForm, TextfieldStatus, TextfieldLabelPosition, Theme } from \"../../types\";\n    import { GpnButton, GpnIcon } from \"..\";\n    import { useRipple } from \"../../using\";\n\n    const props = defineProps({\n        label: { type: String, default: \"\" },\n        caption: { type: String, default: \"\" },\n        view: { type: String as PropType<TextfieldType>, default: \"default\" },\n        disabled: { type: Boolean, default: false },\n        size: { type: String as PropType<TextfieldSize>, default: \"m\" },\n        type: { type: String as PropType<TexfieldInputType>, default: \"text\" },\n        modelValue: { type: [String, Number], default: \"\" },\n        width: { type: String as PropType<TextfieldWidth>, default: \"default\" },\n        form: { type: String as PropType<TextfieldForm>, default: \"default\" },\n        status: { type: String as PropType<TextfieldStatus>, default: \"\" },\n        required: { type: Boolean, default: false },\n        readonly: { type: Boolean, default: false },\n        withClearButton: { type: Boolean, default: false },\n        labelPosition: { type: String as PropType<TextfieldLabelPosition>, default: \"top\" },\n        maxLength: { type: Number, default: 0 },\n        placeholder: { type: String, default: \"\" },\n        theme: { type: String as PropType<Theme>, default: \"kp\" },\n        rows: { type: Number, default: 3 },\n        iconLeft: { type: String, default: \"\" },\n        iconRight: { type: String, default: \"\" },\n        pattern: { type: String, default: \"\" },\n        ripple: { type: Boolean, default: true },\n        tabindex: { type: Number, default: 0 },\n    });\n\n    const focused = ref(false);\n    const tfContainer = ref();\n    const input = ref<HTMLInputElement | HTMLTextAreaElement>();\n    if (props.ripple && !props.readonly) {\n        useRipple(tfContainer);\n    }\n\n    const classes = computed(() => {\n        const _ns = new ns(\"textfield\");\n        return [\n            _ns.namespace(),\n            _ns.block(props.view),\n            _ns.block(props.size, \"size\"),\n            _ns.block(props.labelPosition, \"label-position\"),\n            _ns.block(props.view, \"view\"),\n            _ns.block(props.width, \"width\"),\n            props.disabled && _ns.modifier(\"disabled\"),\n            props.readonly && _ns.modifier(\"readonly\"),\n            _ns.block(props.status || \"undefined\", \"status\"),\n            `cv-theme-${props.theme}`,\n        ];\n    });\n\n    const labelClasses = computed(() => {\n        const _ns = new ns(\"textfield-label\");\n        return [_ns.namespace(), _ns.block(props.size, \"size\")];\n    });\n\n    const containerClasses = computed(() => {\n        const _ns = new ns(\"textfield-input-container\");\n        return [\n            _ns.namespace(),\n            props.withClearButton && props.modelValue && _ns.modifier(\"clear-btn\"),\n            props.type === \"textarea\" && _ns.modifier(\"textarea\"),\n            focused.value && _ns.modifier(\"focus\"),\n            props.disabled && _ns.modifier(\"disabled\"),\n            _ns.modifier(\"form_\" + props.form),\n            _ns.block(props.status || \"undefined\", \"status\"),\n        ];\n    });\n\n    function focusInput() {\n        if (input.value) input.value.focus();\n    }\n    function blurInput() {\n        if (input.value) input.value.blur();\n    }\n    function onFocus(ev: Event) {\n        focused.value = true;\n        emit(\"focus\", ev);\n    }\n    function onBlur(ev: Event) {\n        focused.value = false;\n        emit(\"blur\", ev);\n    }\n    function onInput(event: Event) {\n        emit(\"input\", event);\n        emit(\"update:modelValue\", (event.target as HTMLInputElement).value);\n    }\n    const emit = defineEmits<{\n        (e: \"input\", value: Event): void;\n        (e: \"update:modelValue\", value: string | number): void;\n        (e: \"focus\", value: Event): void;\n        (e: \"focusout\", value: Event): void;\n        (e: \"blur\", value: Event): void;\n    }>();\n\n    function clearInput() {\n        emit(\"update:modelValue\", \"\");\n    }\n\n    defineExpose({\n        focusInput,\n        blurInput,\n        input,\n    });\n</script>\n\n<template>\n    <div :class=\"classes\">\n        <div v-if=\"label\" :class=\"labelClasses\">\n            {{ label }}<span v-if=\"props.required\"><GpnIcon name=\"bi-asterisk\" view=\"alert\" size=\"10\" :theme=\"props.theme\" /></span>\n        </div>\n        <div class=\"cv-textfield-body\">\n            <div ref=\"tfContainer\" :class=\"containerClasses\">\n                <GpnIcon v-if=\"props.iconLeft\" class=\"cv-textfield-body--left-icon\" :name=\"props.iconLeft\" :size=\"props.size\" view=\"ghost\" :theme=\"props.theme\" />\n                <textarea\n                    v-if=\"props.type === 'textarea'\"\n                    ref=\"input\"\n                    :value=\"modelValue\"\n                    class=\"cv-textfield-input\"\n                    :maxlength=\"props.maxLength > 0 ? props.maxLength : undefined\"\n                    :type=\"props.type\"\n                    :placeholder=\"props.placeholder\"\n                    :disabled=\"props.disabled\"\n                    :required=\"props.required\"\n                    :readonly=\"props.readonly\"\n                    :rows=\"props.rows\"\n                    @focus=\"onFocus\"\n                    @blur=\"onBlur\"\n                    @input=\"onInput\"\n                />\n                <input\n                    v-else\n                    ref=\"input\"\n                    :value=\"modelValue\"\n                    class=\"cv-textfield-input\"\n                    :maxlength=\"props.maxLength > 0 ? props.maxLength : undefined\"\n                    :type=\"props.type\"\n                    :placeholder=\"props.placeholder\"\n                    :disabled=\"props.disabled\"\n                    :required=\"props.required\"\n                    :readonly=\"props.readonly\"\n                    :pattern=\"props.pattern\"\n                    :tabindex=\"!props.disabled ? props.tabindex : -1\"\n                    @focus=\"onFocus\"\n                    @blur=\"onBlur\"\n                    @input=\"onInput\"\n                    @focusout=\"emit('focusout', $event)\"\n                />\n                <!-- ДОбавить поведение по хоыеру и фокусу-->\n                <div v-if=\"props.withClearButton && modelValue\" class=\"cv-textfield-clear\">\n                    <GpnButton view=\"clear-ghost\" clear :size=\"props.size\" only-icon icon-left=\"bi-x-lg\" :theme=\"props.theme\" @click=\"clearInput\" />\n                </div>\n                <GpnIcon\n                    v-if=\"props.iconRight\"\n                    :class=\"`cv-textfield-body--right-icon${props.withClearButton && modelValue ? '__with-clear' : ''}`\"\n                    :name=\"props.iconRight\"\n                    :size=\"props.size\"\n                    view=\"ghost\"\n                    :theme=\"props.theme\"\n                />\n            </div>\n            <div v-if=\"caption\" class=\"cv-textfield-caption\">{{ caption }}</div>\n        </div>\n    </div>\n</template>\n\n<style lang=\"sass\">\n    @use './styles/index'\n</style>\n","<script setup lang=\"ts\">\n    import { autoUpdate, flip, offset, useFloating, detectOverflow, MiddlewareState, shift } from \"@floating-ui/vue\";\n    import { GpnIcon, GpnTextField, GpnButton, GpnList } from \"..\";\n    import { PropType, computed, onMounted, ref, watch } from \"vue\";\n    import { DateForm, DateLabelPosition, DateSize, DateStatus, GpnPeriodOption, Theme } from \"../../types\";\n    import { ns } from \"../../utils/ns\";\n    import { useClickOutside, useRipple } from \"../../using\";\n    import dayjs from \"dayjs\";\n    import \"dayjs/locale/ru\";\n    import duration from \"dayjs/plugin/duration\";\n    import isSameOrBefore from \"dayjs/plugin/isSameOrBefore\";\n    import isSameOrAfter from \"dayjs/plugin/isSameOrAfter\";\n    import customParseFormat from \"dayjs/plugin/customParseFormat\";\n\n    dayjs.locale(\"ru\");\n    dayjs.extend(duration);\n    dayjs.extend(isSameOrBefore);\n    dayjs.extend(isSameOrAfter);\n    dayjs.extend(customParseFormat);\n\n    const props = defineProps({\n        label: { type: String, default: \"\" },\n        caption: { type: String, default: \"\" },\n        disabled: { type: Boolean, default: false },\n        size: { type: String as PropType<DateSize>, default: \"m\" },\n        form: { type: String as PropType<DateForm>, default: \"default\" },\n        status: { type: String as PropType<DateStatus>, default: \"\" },\n        required: { type: Boolean, default: false },\n        readonly: { type: Boolean, default: false },\n        labelPosition: { type: String as PropType<DateLabelPosition>, default: \"top\" },\n        placeholder: { type: String, default: \"ДД.ММ.ГГГГ\" },\n        format: { type: String, default: \"DD.MM.YYYY\" },\n        theme: { type: String as PropType<Theme>, default: \"kp\" },\n        modelValue: { type: Array as PropType<string[]>, required: true },\n        notAfter: { type: String, default: \"\" },\n        notBefore: { type: String, default: \"\" },\n        bold: { type: Boolean, default: false },\n        options: { type: Array as PropType<GpnPeriodOption[]>, default: () => [] },\n    });\n\n    const focused = ref(false);\n    const lastFocused = ref<\"start\" | \"finish\" | \"\">(\"\");\n    const startFocused = ref(false);\n    const endFocused = ref(false);\n    const isPickerVisible = ref(false);\n    // const isSelectedWrong = ref(false);\n    const periodElem = ref();\n    const dateContainerElem = ref();\n    const pickerElem = ref();\n    const sDateInput = ref();\n    const fDateInput = ref();\n    const startDate = ref(\n        props.modelValue && props.modelValue.length == 2 && props.modelValue[0] && dayjs(props.modelValue[0], props.format, true).isValid() ? dayjs(props.modelValue[0], props.format) : null,\n    );\n    const finishDate = ref(\n        props.modelValue && props.modelValue.length == 2 && props.modelValue[1] && dayjs(props.modelValue[1], props.format, true).isValid() ? dayjs(props.modelValue[1], props.format) : null,\n    );\n\n    //#region Options\n\n    //#endregion\n\n    //#region Calendar\n    interface ISliderData {\n        year: number;\n        monthes: { month: number; title: string; active: boolean }[];\n    }\n    interface PeriodDate {\n        date: dayjs.Dayjs;\n        text: number;\n        otherMonth: boolean;\n        outOfRange: boolean;\n    }\n\n    const today = dayjs();\n    const weekDays = ref([\"пн\", \"вт\", \"ср\", \"чт\", \"пт\", \"сб\", \"вс\"]);\n    const showDate = ref(startDate.value ? startDate.value.date(1).toDate() : dayjs().date(1).toDate());\n    const sliderData = ref<ISliderData[]>([]);\n    const goNext = ref(false);\n    const goPrev = ref(false);\n\n    const onAnimEnd = () => {\n        if (goNext.value) {\n            goNext.value = false;\n            const nextYear = dayjs(showDate.value).year() + 1;\n            sliderData.value.shift();\n            showDate.value = dayjs(showDate.value).year(nextYear).toDate();\n            sliderData.value.push(__sliderData(dayjs(showDate.value).year() + 2));\n        }\n        if (goPrev.value) {\n            goPrev.value = false;\n            const prevYear = dayjs(showDate.value).year() - 1;\n            sliderData.value.pop();\n            showDate.value = dayjs(showDate.value).year(prevYear).toDate();\n            sliderData.value.unshift(__sliderData(dayjs(showDate.value).year() - 1));\n        }\n    };\n\n    const selectMonth = (month: number, year: number) => {\n        showDate.value = dayjs(showDate.value)\n            .month(month - 1)\n            .toDate();\n        if (month === 1 && dayjs(showDate.value).year() !== year) {\n            showDate.value = dayjs(showDate.value)\n                .month(month - 1)\n                .toDate();\n            nextYear();\n        }\n    };\n\n    function nextYear() {\n        goNext.value = true;\n    }\n    function prevYear() {\n        goPrev.value = true;\n    }\n\n    function setDate(date: PeriodDate) {\n        if (date.otherMonth || date.outOfRange) return;\n        if (!startDate.value && !finishDate.value) {\n            if (lastFocused.value === \"start\") {\n                startDate.value = date.date;\n                fDateInput.value.focusInput();\n            } else if (lastFocused.value === \"finish\") {\n                finishDate.value = date.date;\n                sDateInput.value.focusInput();\n            } else {\n                startDate.value = date.date;\n                fDateInput.value.focusInput();\n            }\n        } else if (!startDate.value && finishDate.value) {\n            if (lastFocused.value === \"finish\") {\n                finishDate.value = date.date;\n                sDateInput.value.focusInput();\n            } else {\n                if (date.date.isSameOrBefore(finishDate.value, \"d\")) startDate.value = date.date;\n                else {\n                    startDate.value = finishDate.value;\n                    finishDate.value = date.date;\n                }\n            }\n        } else if (startDate.value && !finishDate.value) {\n            if (lastFocused.value === \"start\") {\n                startDate.value = date.date;\n                fDateInput.value.focusInput();\n            } else {\n                if (date.date.isSameOrAfter(startDate.value, \"d\")) finishDate.value = date.date;\n                else {\n                    finishDate.value = startDate.value;\n                    startDate.value = date.date;\n                }\n            }\n        } else if (startDate.value && finishDate.value) {\n            if (lastFocused.value === \"start\") {\n                if (date.date.isSameOrAfter(finishDate.value, \"d\")) {\n                    startDate.value = finishDate.value;\n                    finishDate.value = date.date;\n                } else {\n                    startDate.value = date.date;\n                    fDateInput.value.focusInput();\n                }\n            } else if (lastFocused.value === \"finish\") {\n                if (date.date.isSameOrBefore(startDate.value, \"d\")) {\n                    finishDate.value = startDate.value;\n                    startDate.value = date.date;\n                } else {\n                    finishDate.value = date.date;\n                    sDateInput.value.focusInput();\n                }\n            } else {\n                if (date.date.isSameOrBefore(startDate.value, \"d\")) {\n                    startDate.value = date.date;\n                } else {\n                    finishDate.value = date.date;\n                }\n            }\n        }\n        inputPeriod();\n    }\n\n    function __sliderData(year: number) {\n        const months = [];\n        for (let m = 1; m <= 12; m++) {\n            months.push({\n                month: m,\n                title: dayjs(`01.${m}.${year}`, \"DD.M.YYYY\").format(\"MMM\"),\n                active: m === dayjs(showDate.value).month(),\n            });\n        }\n        return {\n            year: year,\n            monthes: months,\n        };\n    }\n\n    const firstMonthName = computed(() => {\n        return dayjs(showDate.value).format(\"MMMM YYYY\");\n    });\n    const firstMonth = computed(() => {\n        return __monthArray(showDate.value);\n    });\n    const firstMonthRows = computed(() => {\n        return Math.ceil(firstMonth.value.length / 7);\n    });\n    const lastMonth = computed(() => {\n        return __monthArray(dayjs(showDate.value).add(1, \"month\").date(1).toDate());\n    });\n    const lastMonthRows = computed(() => {\n        return Math.ceil(lastMonth.value.length / 7);\n    });\n    const lastMonthName = computed(() => {\n        return dayjs(showDate.value).add(1, \"month\").date(1).format(\"MMMM YYYY\");\n    });\n\n    function __monthArray(date: Date): PeriodDate[] {\n        const sDate = dayjs(date);\n        let startC = dayjs(sDate).date(1).set(\"hour\", 0).set(\"minute\", 0).set(\"second\", 0).set(\"millisecond\", 0);\n        let endC = dayjs(sDate).endOf(\"month\").set(\"hour\", 0).set(\"minute\", 0).set(\"second\", 0).set(\"millisecond\", 0);\n        if (startC.day() != 1) {\n            startC = startC.subtract(startC.day() === 0 ? 6 : startC.day() - 1, \"days\");\n        }\n        if (endC.day() != 0) {\n            endC = endC.add(7 - endC.day(), \"days\");\n        }\n        const calArray = [];\n        const numOfDays = dayjs.duration(endC.diff(startC)).asDays() + 1;\n        for (let i = 0; i < numOfDays; i++) {\n            calArray.push({\n                date: dayjs(startC),\n                text: startC.date(),\n                otherMonth: startC.month() !== sDate.month(),\n                outOfRange: !checkCanSelect(startC),\n            });\n            startC = startC.add(1, \"days\");\n        }\n        return calArray;\n    }\n    //#endregion\n\n    onMounted(() => {\n        sliderData.value.push(__sliderData(dayjs(showDate.value).year() - 1));\n        sliderData.value.push(__sliderData(dayjs(showDate.value).year()));\n        sliderData.value.push(__sliderData(dayjs(showDate.value).year() + 1));\n        sliderData.value.push(__sliderData(dayjs(showDate.value).year() + 2));\n    });\n\n    function checkCanSelect(date: string | dayjs.Dayjs) {\n        let cantSelect = false;\n        if (props.notBefore && props.notAfter) {\n            cantSelect = dayjs(date).isSameOrBefore(dayjs(props.notBefore, props.format)) || dayjs(date).isSameOrAfter(dayjs(props.notAfter, props.format));\n        } else if (props.notBefore) {\n            cantSelect = dayjs(date).isSameOrBefore(dayjs(props.notBefore, props.format));\n        } else if (props.notAfter) {\n            cantSelect = dayjs(date).isSameOrAfter(dayjs(props.notAfter, props.format));\n        } else {\n            cantSelect = false;\n        }\n        return !cantSelect;\n    }\n\n    // const prevMonth = () => {\n    //     showDate.value = dayjs(showDate.value).subtract(1, \"month\").toDate();\n    // };\n    // const nextMonth = () => {\n    //     showDate.value = dayjs(showDate.value).add(1, \"month\").toDate();\n    // };\n\n    // interface IDate {\n    //     date: dayjs.Dayjs;\n    //     text: number;\n    //     otherMonth: boolean;\n    //     canSelect: boolean;\n    // }\n    // const setDate = (date: IDate) => {\n    //     if (!date.canSelect) return;\n    //     selDate.value = date.date;\n    //     showDate.value = dayjs(date.date, props.format).date(1).toDate();\n    //     inputDate();\n    // };\n    //\n\n    useRipple(dateContainerElem);\n    useClickOutside(/*periodElem*/pickerElem, hidePicker);\n    const overflowMiddleware = {\n        name: 'mOverflow',\n        async fn(state: MiddlewareState) {\n            const overflow = await detectOverflow(state, {\n                boundary: document.querySelector('body')\n            });\n            return {data: {\n                shouldTeleport: overflow.left >=0 || overflow.right >=0\n            }};\n        }\n    }\n    const { floatingStyles, placement, middlewareData } = useFloating(dateContainerElem, pickerElem, {\n        placement: \"bottom-start\",\n        whileElementsMounted: autoUpdate,\n        middleware: [\n            flip({\n                crossAxis: false,\n            }),\n            offset(4),\n            overflowMiddleware,\n            shift()\n        ],\n        open: isPickerVisible,\n    });\n\n    const classes = computed(() => {\n        const _ns = new ns(\"period\");\n        return [\n            _ns.namespace(),\n            _ns.block(props.size, \"size\"),\n            _ns.block(props.labelPosition, \"label-position\"),\n            props.disabled && _ns.modifier(\"disabled\"),\n            props.readonly && _ns.modifier(\"readonly\"),\n            props.bold && _ns.modifier(\"bold\"),\n            _ns.block(props.status || \"undefined\", \"status\"),\n            // isOptionsVisible.value && _ns.modifier(\"opened\"),\n            // hasValue.value && _ns.modifier(\"has-value\"),\n            `cv-theme-${props.theme}`,\n        ];\n    });\n    const labelClasses = computed(() => {\n        const _ns = new ns(\"period-label\");\n        return [_ns.namespace(), _ns.block(props.size, \"size\")];\n    });\n    const containerClasses = computed(() => {\n        const _ns = new ns(\"period-input-container\");\n        return [\n            _ns.namespace(),\n            focused.value && _ns.modifier(\"focus\"),\n            props.disabled && _ns.modifier(\"disabled\"),\n            _ns.modifier(\"form_\" + props.form),\n            _ns.block(props.status || \"undefined\", \"status\"),\n            placement.value.indexOf(\"top\") >= 0 && _ns.modifier(\"top\"),\n            placement.value.indexOf(\"bottom\") >= 0 && _ns.modifier(\"bottom\"),\n        ];\n    });\n    const pickerClasses = computed(() => {\n        const _ns = new ns(\"period-picker\");\n        return [\n            _ns.namespace(),\n            `cv-theme-${props.theme}`,\n            _ns.block(props.size, \"size\"),\n            placement.value.indexOf(\"top\") >= 0 && _ns.modifier(\"top\"),\n            placement.value.indexOf(\"bottom\") >= 0 && _ns.modifier(\"bottom\"),\n        ];\n    });\n\n    watch(\n        () => props.modelValue,\n        () => {\n            startDate.value =\n                props.modelValue &&\n                props.modelValue.length == 2 &&\n                props.modelValue[0] &&\n                dayjs(props.modelValue[0], props.format, true).isValid() &&\n                checkCanSelect(dayjs(props.modelValue[0], props.format))\n                    ? dayjs(props.modelValue[0], props.format)\n                    : null;\n            finishDate.value =\n                props.modelValue &&\n                props.modelValue.length == 2 &&\n                props.modelValue[1] &&\n                dayjs(props.modelValue[1], props.format, true).isValid() &&\n                checkCanSelect(dayjs(props.modelValue[1], props.format))\n                    ? dayjs(props.modelValue[1], props.format)\n                    : null;\n        },\n    );\n\n    const sDateText = computed(() => {\n        if (startDate.value && startDate.value.isValid()) {\n            return startDate.value.format(props.format);\n        }\n        return \"\";\n    });\n    const fDateText = computed(() => {\n        if (finishDate.value && finishDate.value.isValid()) {\n            return finishDate.value.format(props.format);\n        }\n        return \"\";\n    });\n\n    function hidePicker() {\n        focused.value = false;\n        isPickerVisible.value = false;\n        // dateText.value = \"\";\n    }\n    // function inputDate() {\n    //     emit(\"update:modelValue\", selDate.value ? selDate.value.format(props.format) : \"\");\n    //     emit(\"change\", selDate.value ? selDate.value.format(props.format) : \"\");\n    //     hidePicker();\n    // }\n    const onTogglePicker = () => {\n        isPickerVisible.value = !isPickerVisible.value;\n    };\n    const onFocus = () => {\n        focused.value = true;\n    };\n    const onBlur = () => {};\n    const onStartFocusToggle = (val: boolean) => {\n        if (val) lastFocused.value = \"start\";\n        startFocused.value = val;\n    };\n    const onEndFocusToggle = (val: boolean) => {\n        if (val) lastFocused.value = \"finish\";\n        endFocused.value = val;\n    };\n    const onStartInput = (ev: Event) => {\n        const inputElem = sDateInput.value.input as HTMLInputElement;\n        if (!inputElem) return;\n        const val = inputElem.value;\n        if (\n            dayjs(val, props.format, true).isValid() && // ||\n            // dayjs(val, \"DD.MM.YYYY\", true).isValid() ||\n            // dayjs(val, \"D.M.YYYY\", true).isValid() ||\n            // dayjs(val, \"DD.M.YYYY\", true).isValid() ||\n            // dayjs(val, \"D.MM.YYYY\", true).isValid() ||\n            // dayjs(val, \"DDMMYYYY\", true).isValid()) &&\n            checkCanSelect(dayjs(val, \"DD.MM.YYYY\"))\n        ) {\n            startDate.value = dayjs(val, \"DD.MM.YYYY\");\n            inputPeriod();\n        } else if (val === \"\") {\n            startDate.value = null;\n            inputPeriod();\n        }\n        emit(\"input\", ev);\n    };\n    const onEndInput = (ev: Event) => {\n        const inputElem = fDateInput.value.input as HTMLInputElement;\n        if (!inputElem) return;\n        const val = inputElem.value;\n        if (\n            (dayjs(val, props.format, true).isValid() ||\n                dayjs(val, \"DD.MM.YYYY\", true).isValid() ||\n                dayjs(val, \"D.M.YYYY\", true).isValid() ||\n                dayjs(val, \"DD.M.YYYY\", true).isValid() ||\n                dayjs(val, \"D.MM.YYYY\", true).isValid() ||\n                dayjs(val, \"DDMMYYYY\", true).isValid()) &&\n            checkCanSelect(dayjs(val, \"DD.MM.YYYY\"))\n        ) {\n            finishDate.value = dayjs(val, \"DD.MM.YYYY\");\n            inputPeriod();\n        } else if (val === \"\") {\n            finishDate.value = null;\n            inputPeriod();\n        }\n        emit(\"input\", ev);\n    };\n    const onOptionClick = (item: GpnPeriodOption) => {\n        try {\n            const fromDate = item.from && dayjs(item.from, props.format).isValid() ? dayjs(item.from, props.format) : dayjs();\n            const toDate = dayjs(fromDate).add(item.shift, item.type || \"d\");\n            startDate.value = fromDate.isBefore(toDate) ? fromDate : toDate;\n            finishDate.value = toDate.isAfter(fromDate) ? toDate : fromDate;\n            inputPeriod();\n        } catch (e) {\n            throw \"Unresolved error while converting periods\";\n        }\n    };\n\n    const emit = defineEmits([\"change\", \"update:modelValue\", \"input\"]);\n    function inputPeriod() {\n        emit(\"update:modelValue\", [startDate.value ? startDate.value.format(\"DD.MM.YYYY\") : \"\", finishDate.value ? finishDate.value.format(\"DD.MM.YYYY\") : \"\"]);\n    }\n</script>\n\n<template>\n    <div ref=\"periodElem\" :class=\"classes\" tabindex=\"0\" @focus=\"onFocus\" @blur=\"onBlur\">\n        <div v-if=\"label\" :class=\"labelClasses\">\n            {{ label }}<span v-if=\"props.required\"><GpnIcon name=\"bi-asterisk\" view=\"alert\" size=\"10\" :theme=\"props.theme\" /></span>\n        </div>\n        <div ref=\"dateContainerElem\" :class=\"containerClasses\">\n            <GpnTextField\n                ref=\"sDateInput\"\n                :model-value=\"sDateText\"\n                :tabindex=\"-1\"\n                :size=\"props.size\"\n                :theme=\"props.theme\"\n                width=\"full\"\n                view=\"clear\"\n                :placeholder=\"placeholder\"\n                :ripple=\"false\"\n                @input=\"onStartInput\"\n                @focus=\"onStartFocusToggle(true)\"\n                @blur=\"onStartFocusToggle(false)\"\n            />\n            <GpnButton tag=\"div\" view=\"clear-ghost\" :ripple=\"false\" :theme=\"props.theme\" :size=\"props.size\" only-icon icon-left=\"bi-calendar-range\" @click=\"onTogglePicker\" />\n            <div class=\"period-delim\"></div>\n            <GpnTextField\n                ref=\"fDateInput\"\n                :model-value=\"fDateText\"\n                :tabindex=\"-1\"\n                :size=\"props.size\"\n                :theme=\"props.theme\"\n                width=\"full\"\n                view=\"clear\"\n                :placeholder=\"placeholder\"\n                :ripple=\"false\"\n                @input=\"onEndInput\"\n                @focus=\"onEndFocusToggle(true)\"\n                @blur=\"onEndFocusToggle(false)\"\n            />\n            <GpnButton tag=\"div\" view=\"clear-ghost\" :ripple=\"false\" :theme=\"props.theme\" :size=\"props.size\" only-icon icon-left=\"bi-calendar-range\" @click=\"onTogglePicker\" />\n        </div>\n        <div v-if=\"caption\" class=\"cv-date-caption\">{{ caption }}</div>\n        <Teleport to=\"body\" :disabled=\"!middlewareData.mOverflow?.shouldTeleport\">\n            <div v-if=\"isPickerVisible\" ref=\"pickerElem\" :class=\"pickerClasses\" :style=\"floatingStyles\">\n                <GpnList v-show=\"props.options.length > 0\" :items=\"options\" class=\"cv-period--preselector\" :theme=\"props.theme\" :scroll-options=\"{ wheelPropagation: false }\" @click=\"onOptionClick\" />\n                <div class=\"cv-period-calendar\">\n                    <div class=\"cv-period-calendar--years\">\n                        <GpnButton view=\"ghost\" size=\"xl\" :theme=\"props.theme\" only-icon icon-left=\"bi-arrow-left-short\" @click=\"prevYear\" />\n                        <div class=\"years-slider\">\n                            <div class=\"years-slider--wrapper\">\n                                <div class=\"years-slider--sel-month\" :class=\"`shift-${dayjs(showDate).month() + 1}`\"></div>\n                                <div\n                                    v-for=\"(y, yIndex) in sliderData\"\n                                    :key=\"yIndex\"\n                                    class=\"years-slider--year\"\n                                    :class=\"[`pos-${yIndex}`, { 'go-next': goNext }, { 'go-prev': goPrev }]\"\n                                    @animationend=\"onAnimEnd\"\n                                >\n                                    {{ y.year }}\n                                </div>\n                                <div v-for=\"(y, yIndex) in sliderData\" :key=\"yIndex\" class=\"years-slider--months\" :class=\"[`pos-${yIndex}`, { 'go-next': goNext }, { 'go-prev': goPrev }]\">\n                                    <div\n                                        v-for=\"m in y.monthes\"\n                                        :key=\"m.month\"\n                                        class=\"years-slider--month\"\n                                        :class=\"{ bold: m.month === dayjs(showDate).month() + 1 || m.month === dayjs(showDate).month() + 2 }\"\n                                        @click=\"selectMonth(m.month, y.year)\"\n                                    >\n                                        {{ m.title }}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <GpnButton view=\"ghost\" size=\"xl\" :theme=\"props.theme\" only-icon icon-left=\"bi-arrow-right-short\" @click=\"nextYear\" />\n                    </div>\n                    <div class=\"cv-period-calendar--months\">\n                        <div class=\"cv-period-calendar--month\">\n                            <div class=\"cv-period-calendar--month-title\">{{ firstMonthName }}</div>\n                            <div class=\"cv-period-calendar--weekdays\">\n                                <div v-for=\"i in weekDays\" :key=\"i\" class=\"cv-period-calendar--weekday\">{{ i }}</div>\n                            </div>\n                            <div v-for=\"(_, index) in firstMonthRows\" :key=\"index\" class=\"cv-period-calendar--week\">\n                                <div\n                                    v-for=\"d in firstMonth.slice(index * 7, index * 7 + 7)\"\n                                    :key=\"`${index}-${d.text}`\"\n                                    class=\"cv-period-calendar--day\"\n                                    :class=\"{\n                                        'other-month': d.otherMonth,\n                                        'out-of-range': d.outOfRange,\n                                        today: d.date.isSame(today, 'day'),\n                                        active: d.date.isSame(startDate, 'day') || d.date.isSame(finishDate, 'day'),\n                                        'has-finish': finishDate && d.date.isSame(startDate, 'day') && finishDate !== startDate,\n                                        'has-start': startDate && d.date.isSame(finishDate, 'day') && finishDate !== startDate,\n                                        'in-period': startDate && finishDate && d.date.isBefore(finishDate, 'day') && d.date.isAfter(startDate, 'day'),\n                                    }\"\n                                    @click=\"setDate(d)\"\n                                >\n                                    <div>{{ d.text }}</div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"cv-period-calendar--month\">\n                            <div class=\"cv-period-calendar--month-title\">{{ lastMonthName }}</div>\n                            <div class=\"cv-period-calendar--weekdays\">\n                                <div v-for=\"i in weekDays\" :key=\"i\" class=\"cv-period-calendar--weekday\">{{ i }}</div>\n                            </div>\n                            <div v-for=\"(_, index) in lastMonthRows\" :key=\"index\" class=\"cv-period-calendar--week\">\n                                <div\n                                    v-for=\"d in lastMonth.slice(index * 7, index * 7 + 7)\"\n                                    :key=\"`${index}-${d.text}`\"\n                                    class=\"cv-period-calendar--day\"\n                                    :class=\"{\n                                        'other-month': d.otherMonth,\n                                        'out-of-range': d.outOfRange,\n                                        today: d.date.isSame(today, 'day'),\n                                        active: d.date.isSame(startDate, 'day') || d.date.isSame(finishDate, 'day'),\n                                        'has-finish': finishDate && d.date.isSame(startDate, 'day') && finishDate !== startDate,\n                                        'has-start': startDate && d.date.isSame(finishDate, 'day') && finishDate !== startDate,\n                                        'in-period': startDate && finishDate && d.date.isBefore(finishDate, 'day') && d.date.isAfter(startDate, 'day'),\n                                    }\"\n                                    @click=\"setDate(d)\"\n                                >\n                                    <div>{{ d.text }}</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </Teleport>\n    </div>\n</template>\n\n<style lang=\"scss\">\n    @import \"./styles/\";\n</style>\n","<script setup lang=\"ts\">\n    import { GpnPeriod, type GpnPeriodOption } from \"gpn-ui-dev\";\n    import { useGlobalStore } from \"../stores/store\";\n    import { ref } from \"vue\";\n    const store = useGlobalStore();\n    const mDate = ref<string[]>([]);\n    const opts = ref<GpnPeriodOption[]>([\n        {\n            id: \"month\",\n            name: \"За месяц\",\n            shift: -1,\n            type: \"month\",\n        },\n        {\n            id: \"ten\",\n            name: \"За 10 дней\",\n            shift: -10,\n        },\n        {\n            id: \"week\",\n            name: \"За неделю\",\n            shift: -7,\n        },\n        {\n            id: \"month1\",\n            name: \"За месяц\",\n            shift: -1,\n            type: \"month\",\n        },\n        {\n            id: \"ten1\",\n            name: \"За 10 дней\",\n            shift: -10,\n        },\n        {\n            id: \"week1\",\n            name: \"За неделю\",\n            shift: -7,\n        },\n        {\n            id: \"month2\",\n            name: \"За месяц\",\n            shift: -1,\n            type: \"month\",\n        },\n        {\n            id: \"ten2\",\n            name: \"За 10 дней\",\n            shift: -10,\n        },\n        {\n            id: \"week2\",\n            name: \"За неделю\",\n            shift: -7,\n        },\n        {\n            id: \"month3\",\n            name: \"За месяц\",\n            shift: -1,\n            type: \"month\",\n        },\n        {\n            id: \"ten3\",\n            name: \"За 10 дней\",\n            shift: -10,\n        },\n        {\n            id: \"week3\",\n            name: \"За неделю\",\n            shift: -7,\n        },\n    ]);\n</script>\n\n<template>\n    <h2>Period</h2>\n    <div>\n        <div class=\"grid\">\n            <h5>Not-disabled</h5>\n            <div>XL</div>\n            <div>L</div>\n            <div>M</div>\n            <div>S</div>\n            <div>XS</div>\n\n            <h5>Default</h5>\n            <GpnPeriod v-model=\"mDate\" label=\"Выбор даты\" caption=\"подтекст\" :theme=\"store.theme\" />\n            <GpnPeriod v-model=\"mDate\" :options=\"opts\" label=\"Выбор даты\" caption=\"подтекст\" :theme=\"store.theme\" />\n\n            <h5>Active</h5>\n        </div>\n    </div>\n</template>\n\n<style lang=\"scss\" scoped>\n    .grid {\n        display: grid;\n        grid-template-columns: 90px repeat(4, 1fr);\n        grid-template-rows: repeat(6, 1fr);\n        grid-auto-flow: column;\n        gap: 16px;\n        align-items: center;\n        margin-bottom: 48px;\n    }\n    h5 {\n        color: #2f5e7b;\n        font-size: 12px;\n    }\n</style>\n"],"names":["props","__props","focused","ref","tfContainer","input","useRipple","classes","computed","_ns","ns","labelClasses","containerClasses","focusInput","blurInput","onFocus","ev","emit","onBlur","onInput","event","__emit","clearInput","__expose","dayjs","duration","isSameOrBefore","isSameOrAfter","customParseFormat","lastFocused","startFocused","endFocused","isPickerVisible","periodElem","dateContainerElem","pickerElem","sDateInput","fDateInput","startDate","finishDate","today","weekDays","showDate","sliderData","goNext","goPrev","onAnimEnd","nextYear","__sliderData","prevYear","selectMonth","month","year","setDate","date","inputPeriod","months","m","firstMonthName","firstMonth","__monthArray","firstMonthRows","lastMonth","lastMonthRows","lastMonthName","sDate","startC","endC","calArray","numOfDays","i","checkCanSelect","onMounted","cantSelect","useClickOutside","hidePicker","overflowMiddleware","state","overflow","detectOverflow","floatingStyles","placement","middlewareData","useFloating","autoUpdate","flip","offset","shift","pickerClasses","watch","sDateText","fDateText","onTogglePicker","onStartFocusToggle","val","onEndFocusToggle","onStartInput","inputElem","onEndInput","onOptionClick","item","fromDate","toDate","store","useGlobalStore","mDate","opts"],"mappings":"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"}